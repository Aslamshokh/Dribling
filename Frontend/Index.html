<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dribbling - –ì–ª–∞–≤–Ω–∞—è</title>
    <link rel="stylesheet" href="css style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="header">
        <div class="header-title">Dribbling ‚öΩ</div>
        <div>–ü–µ–Ω–¥–∂–∏–∫–µ–Ω—Ç</div>
    </div>

    <div class="container">
        <div class="card" style="padding: 0; overflow: hidden;">
            <img src="https://via.placeholder.com/600x200/1db954/ffffff?text=Dribbling+Panjakent" 
                 alt="Dribbling" style="width: 100%; height: 200px; object-fit: cover;">
        </div>

        <div class="card">
            <h2 style="margin-bottom: 12px;">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Dribbling!</h2>
            <p style="color: var(--text-secondary); margin-bottom: 16px;">
                –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Ñ—É—Ç–±–æ–ª—å–Ω—ã—Ö –º–∞—Ç—á–µ–π –≤ –ü–µ–Ω–¥–∂–∏–∫–µ–Ω—Ç–µ, –¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω. 
                –ù–∞—Ö–æ–¥–∏—Ç–µ –∏–≥—Ä—ã, —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã –∏ –ø–æ–≤—ã—à–∞–π—Ç–µ —Ä–µ–π—Ç–∏–Ω–≥!
            </p>
            <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                <span class="filter-chip">‚öΩ –ü–µ–Ω–¥–∂–∏–∫–µ–Ω—Ç</span>
                <span class="filter-chip">üèÜ 100+ –∏–≥—Ä–æ–∫–æ–≤</span>
                <span class="filter-chip">üìÖ –ï–∂–µ–¥–Ω–µ–≤–Ω–æ</span>
            </div>
        </div>

        <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                <h3>–ë–ª–∏–∂–∞–π—à–∏–µ –º–∞—Ç—á–∏</h3>
                <a href="matches.html" style="color: var(--accent-green); text-decoration: none;">–í—Å–µ ‚Üí</a>
            </div>
            
            <div id="upcoming-matches">
                <div class="loading">
                    <div class="loading-spinner"></div>
                </div>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 16px;">
            <a href="leaderboard.html" class="btn btn-outline" style="text-align: center;">
                <i class="fas fa-trophy"></i> –†–µ–π—Ç–∏–Ω–≥
            </a>
            <a href="map.html" class="btn btn-outline" style="text-align: center;">
                <i class="fas fa-map"></i> –ö–∞—Ä—Ç–∞
            </a>
        </div>
    </div>

    <nav class="bottom-nav">
        <a href="profile.html" class="nav-item">
            <i class="fas fa-user"></i>
            <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
        </a>
        <a href="matches.html" class="nav-item">
            <i class="fas fa-futbol"></i>
            <span>–ú–∞—Ç—á–∏</span>
        </a>
        <a href="create-match.html" class="nav-item">
            <i class="fas fa-plus-circle"></i>
            <span>–°–æ–∑–¥–∞—Ç—å</span>
        </a>
    </nav>

    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const matches = await api.getMatches({ status: 'open', limit: 3 });
                const container = document.getElementById('upcoming-matches');
                
                if (matches.length === 0) {
                    container.innerHTML = '<p style="color: var(--text-secondary); text-align: center;">–ù–µ—Ç –±–ª–∏–∂–∞–π—à–∏—Ö –º–∞—Ç—á–µ–π</p>';
                    return;
                }
                
                container.innerHTML = '';
                matches.forEach(match => {
                    const matchCard = document.createElement('div');
                    matchCard.className = 'match-card';
                    matchCard.onclick = () => navigateTo(`match-detail.html?id=${match.id}`);
                    matchCard.innerHTML = `
                        <div style="margin-bottom: 8px;">
                            <div style="font-weight: 600;">${match.title}</div>
                            <div style="font-size: 14px; color: var(--text-secondary);">
                                ${match.stadium} ‚Ä¢ ${formatDate(match.date_time)}
                            </div>
                        </div>
                        <div class="match-players">
                            <span>üë• ${match.players_count || 0}/${match.max_players}</span>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${((match.players_count || 0) / match.max_players) * 100}%"></div>
                            </div>
                            <span class="btn btn-small btn-outline">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è</span>
                        </div>
                    `;
                    container.appendChild(matchCard);
                });
            } catch (error) {
                console.error('Error loading matches:', error);
                document.getElementById('upcoming-matches').innerHTML = 
                    '<p style="color: var(--text-secondary); text-align: center;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</p>';
            }
        });
    </script>
</body>
</html>